<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Agendamento de Tatuagem</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
<style>
  body { background: #0f1720; color: #f8fafc; }
  .container { max-width: 700px; margin-top: 30px; }
  .card { background: linear-gradient(180deg,#111827 0%, #0b1220 100%); padding: 20px; border-radius: 12px; border: 1px solid rgba(255,255,255,0.1); }
  label { color: #f1f5f9; }
  .form-control, .form-select {
    background-color: #1e293b;
    border: 1px solid #334155;
    color: #f8fafc;
  }
  .form-control:focus {
    background-color: #1e293b;
    color: #f8fafc;
    border-color: #3b82f6;
    box-shadow: 0 0 0 0.2rem rgba(59,130,246,.25);
  }
  .btn-primary {
    background-color: #3b82f6;
    border: none;
  }
  .btn-primary:hover {
    background-color: #2563eb;
  }
</style>
</head>
<body>
  <div class="container">
    <div class="card">
      <h2 class="mb-4">Novo Agendamento de Tatuagem</h2>

      <div id="alertPlaceholder"></div>

      <form id="formAgendamento" action="salvar_agendamento.php" method="POST" enctype="multipart/form-data" novalidate>
        
        <div class="mb-3">
          <label for="clienteNome" class="form-label">Nome Completo *</label>
          <input type="text" id="clienteNome" name="clienteNome" class="form-control" required />
        </div>

        <div class="mb-3">
          <label for="telefone" class="form-label">Telefone / WhatsApp *</label>
          <input type="text" id="telefone" name="telefone" class="form-control" required />
        </div>

        <div class="mb-3">
          <label for="dataAgendamento" class="form-label">Data do Agendamento *</label>
          <input type="date" id="dataAgendamento" name="dataAgendamento" class="form-control" required />
        </div>

        <div class="row g-3">
          <div class="col-md-6 mb-3">
            <label for="horaInicio" class="form-label">Hora Início *</label>
            <input type="time" id="horaInicio" name="horaInicio" class="form-control" required />
          </div>
          <div class="col-md-6 mb-3">
            <label for="horaFim" class="form-label">Hora Fim *</label>
            <input type="time" id="horaFim" name="horaFim" class="form-control" required />
          </div>
        </div>

        <div class="mb-3">
          <label for="tatuador" class="form-label">Tatuador *</label>
          <select id="tatuador" name="tatuador" class="form-select" required>
            <option value="">Selecione um tatuador</option>
            <option value="daniel">Daniel</option>
            <option value="theo">Theo</option>
            <option value="meduri">Meduri</option>
            <option value="wesley">Wesley</option>
            <option value="will">Will</option>

          </select>
        </div>

        <div class="mb-3">
          <label for="parteCorpo" class="form-label">Parte do Corpo a ser Tatuada *</label>
          <input type="text" id="parteCorpo" name="parteCorpo" class="form-control" required placeholder="Ex: braço, costas, perna..." />
        </div>

        <div class="mb-3">
          <label for="descricao" class="form-label">Descrição da Tatuagem</label>
          <textarea id="descricao" name="descricao" class="form-control" rows="3" placeholder="Descreva a tatuagem, estilo, cores, etc"></textarea>
        </div>

        <div class="mb-3">
          <label for="imagens" class="form-label">Imagens de Referência (pode enviar múltiplas)</label>
          <input type="file" id="imagens" name="imagens[]" class="form-control" accept="image/*" multiple />
        </div>

        <button type="submit" class="btn btn-primary w-100">Agendar</button>
      </form>
    </div>
  </div>

<script>
// Função para criar alertas bootstrap
function showAlert(message, type = 'success') {
  const placeholder = document.getElementById('alertPlaceholder');
  placeholder.innerHTML = `
    <div class="alert alert-${type} alert-dismissible fade show" role="alert">
      ${message}
      <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Fechar"></button>
    </div>
  `;
}

// Envio do formulário via AJAX
document.getElementById('formAgendamento').addEventListener('submit', function(e) {
  e.preventDefault();

  const form = e.target;
  const formData = new FormData(form);

  fetch(form.action, {
    method: 'POST',
    body: formData
  })
  .then(response => response.json())
  .then(data => {
    if (data.success) {
      showAlert(data.msg, 'success');
      form.reset();
    } else {
      showAlert(data.msg || 'Erro ao salvar agendamento.', 'danger');
    }
  })
  .catch(() => {
    showAlert('Erro na comunicação com o servidor.', 'danger');
  });
});
</script>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
